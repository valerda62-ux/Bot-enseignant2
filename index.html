<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bot Enseignant Automatique - Fran√ßais Malagasy</title>
<style>
    :root {
        --primary: #2563eb;
        --primary-dark: #1d4ed8;
        --secondary: #059669;
        --secondary-dark: #047857;
        --accent: #dc2626;
        --accent-dark: #b91c1c;
        --light: #f8fafc;
        --dark: #1e293b;
        --gray: #64748b;
        --light-gray: #f1f5f9;
        --border: #e2e8f0;
        --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }
    
    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }
    
    body {
        font-family: 'Inter', 'Segoe UI', system-ui, -apple-system, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        padding: 20px;
        color: var(--dark);
        line-height: 1.6;
        font-weight: 400;
    }
    
    .bot-container {
        background: #ffffff;
        padding: 32px;
        border-radius: 16px;
        box-shadow: var(--shadow-lg);
        max-width: 1000px;
        width: 100%;
        position: relative;
        overflow: hidden;
    }
    
    .bot-header {
        text-align: center;
        margin-bottom: 32px;
        position: relative;
    }
    
    .bot-avatar {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--primary), var(--primary-dark));
        margin: 0 auto 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 32px;
        box-shadow: var(--shadow);
        border: 4px solid white;
    }
    
    .bot-header h2 {
        color: var(--dark);
        margin-bottom: 8px;
        font-size: 28px;
        font-weight: 700;
        letter-spacing: -0.025em;
    }
    
    .bot-subtitle {
        color: var(--gray);
        font-size: 16px;
        margin-bottom: 24px;
        font-weight: 500;
    }
    
    .progress-container {
        margin: 24px 0;
        background: var(--light-gray);
        border-radius: 12px;
        height: 8px;
        overflow: hidden;
        position: relative;
    }
    
    .progress-bar {
        height: 100%;
        background: linear-gradient(90deg, var(--primary), var(--primary-dark));
        border-radius: 12px;
        width: 0%;
        transition: width 0.5s ease;
        position: relative;
    }
    
    .progress-text {
        text-align: center;
        font-size: 14px;
        color: var(--gray);
        margin-top: 12px;
        font-weight: 500;
    }
    
    .navigation-buttons {
        display: flex;
        justify-content: space-between;
        margin-bottom: 24px;
        flex-wrap: wrap;
        gap: 12px;
    }
    
    .content-area {
        min-height: 500px;
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 28px;
        margin-bottom: 24px;
        background: var(--light);
        transition: all 0.3s ease;
    }
    
    .typing-indicator {
        display: none;
        text-align: center;
        padding: 24px;
        color: var(--gray);
        font-style: italic;
        background: white;
        border-radius: 12px;
        margin: 20px 0;
        box-shadow: var(--shadow);
    }
    
    .typing-dots {
        display: inline-block;
        margin-left: 8px;
    }
    
    .typing-dots span {
        animation: typing 1.5s infinite;
        display: inline-block;
    }
    
    .typing-dots span:nth-child(2) {
        animation-delay: 0.2s;
    }
    
    .typing-dots span:nth-child(3) {
        animation-delay: 0.4s;
    }
    
    @keyframes typing {
        0%, 100% { opacity: 0.2; }
        50% { opacity: 1; }
    }
    
    .lesson-section, .exercise-section, .oral-practice-section {
        display: none;
    }
    
    .lesson-content {
        background: white;
        padding: 28px;
        border-radius: 12px;
        box-shadow: var(--shadow);
        margin-bottom: 24px;
        border-left: 4px solid var(--primary);
    }
    
    .lesson-title {
        color: var(--dark);
        font-weight: 700;
        margin-bottom: 20px;
        font-size: 22px;
        padding-bottom: 16px;
        border-bottom: 2px solid var(--light-gray);
        letter-spacing: -0.025em;
    }
    
    .lesson-desc {
        line-height: 1.7;
        margin-bottom: 24px;
        color: var(--dark);
        font-size: 16px;
        background: var(--light-gray);
        padding: 20px;
        border-radius: 8px;
        border-left: 4px solid var(--primary);
    }
    
    .language-tabs {
        display: flex;
        margin-bottom: 24px;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: var(--shadow);
    }
    
    .language-tab {
        padding: 16px 24px;
        cursor: pointer;
        background: var(--light-gray);
        transition: all 0.3s ease;
        flex: 1;
        text-align: center;
        font-weight: 600;
        color: var(--gray);
        border: none;
        font-size: 15px;
    }
    
    .language-tab.active {
        background: var(--primary);
        color: white;
        font-weight: 600;
    }
    
    .language-tab:hover:not(.active) {
        background: #e2e8f0;
    }
    
    .language-content {
        display: none;
        background: white;
        padding: 24px;
        border-radius: 0 0 8px 8px;
        line-height: 1.7;
    }
    
    .language-content.active {
        display: block;
    }
    
    .language-content h4 {
        color: var(--dark);
        margin: 24px 0 16px 0;
        font-weight: 700;
        font-size: 18px;
        letter-spacing: -0.025em;
    }
    
    .language-content h5 {
        color: var(--dark);
        margin: 20px 0 12px 0;
        font-weight: 600;
        font-size: 16px;
    }
    
    .language-content p {
        margin-bottom: 16px;
        color: var(--dark);
        font-size: 16px;
    }
    
    .language-content strong {
        color: var(--primary);
        font-weight: 600;
    }
    
    .language-content ul {
        margin: 16px 0 20px 24px;
    }
    
    .language-content li {
        margin-bottom: 12px;
        position: relative;
        padding-left: 8px;
    }
    
    .language-content li:before {
        content: "‚Ä¢";
        color: var(--primary);
        font-weight: bold;
        margin-right: 12px;
    }
    
    .example-box {
        background: #f0f9ff;
        border: 1px solid #bae6fd;
        border-radius: 8px;
        padding: 16px;
        margin: 16px 0;
        border-left: 4px solid var(--primary);
    }
    
    .example-title {
        font-weight: 600;
        color: var(--primary);
        margin-bottom: 8px;
    }
    
    .lesson-image {
        text-align: center;
        font-size: 56px;
        margin: 28px 0;
        padding: 24px;
        background: white;
        border-radius: 12px;
        box-shadow: var(--shadow);
    }
    
    .exercise-content {
        background: white;
        padding: 28px;
        border-radius: 12px;
        box-shadow: var(--shadow);
        border-left: 4px solid var(--secondary);
    }
    
    .exercise-question {
        font-size: 18px;
        margin-bottom: 24px;
        font-weight: 600;
        color: var(--dark);
        line-height: 1.6;
    }
    
    .exercise-counter {
        font-size: 14px;
        color: var(--gray);
        margin-bottom: 20px;
        text-align: center;
        background: var(--light-gray);
        padding: 12px;
        border-radius: 8px;
        font-weight: 500;
    }
    
    .input-group {
        margin-bottom: 24px;
        position: relative;
    }
    
    input[type="text"] {
        width: 100%;
        padding: 16px 120px 16px 20px;
        font-size: 16px;
        border-radius: 8px;
        border: 2px solid var(--border);
        transition: all 0.3s;
        background: white;
        font-family: inherit;
        font-weight: 500;
    }
    
    input[type="text"]:focus {
        border-color: var(--primary);
        outline: none;
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }
    
    .voice-input-btn {
        position: absolute;
        right: 60px;
        top: 50%;
        transform: translateY(-50%);
        background: var(--light-gray);
        border: none;
        border-radius: 8px;
        width: 44px;
        height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s;
        color: var(--gray);
        font-size: 18px;
    }
    
    .voice-input-btn:hover {
        background: var(--primary);
        color: white;
        transform: translateY(-50%) scale(1.05);
    }
    
    .voice-input-btn.recording {
        background: var(--accent);
        color: white;
        animation: pulse 1.5s infinite;
    }
    
    .voice-send-btn {
        position: absolute;
        right: 12px;
        top: 50%;
        transform: translateY(-50%);
        background: var(--secondary);
        border: none;
        border-radius: 8px;
        width: 44px;
        height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s;
        color: white;
        font-size: 18px;
    }
    
    .voice-send-btn:hover {
        background: var(--secondary-dark);
        transform: translateY(-50%) scale(1.05);
    }
    
    @keyframes pulse {
        0% { transform: translateY(-50%) scale(1); }
        50% { transform: translateY(-50%) scale(1.1); }
        100% { transform: translateY(-50%) scale(1); }
    }
    
    .button-container {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        margin-top: 24px;
    }
    
    button {
        padding: 16px 24px;
        font-size: 15px;
        border: none;
        border-radius: 8px;
        background: var(--primary);
        color: white;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        font-weight: 600;
        flex: 1;
        min-width: 160px;
        letter-spacing: -0.025em;
    }
    
    button:hover {
        background: var(--primary-dark);
        transform: translateY(-2px);
        box-shadow: var(--shadow);
    }
    
    button:active {
        transform: translateY(0);
    }
    
    button.secondary {
        background: var(--secondary);
    }
    
    button.secondary:hover {
        background: var(--secondary-dark);
    }
    
    button.accent {
        background: var(--accent);
    }
    
    button.accent:hover {
        background: var(--accent-dark);
    }
    
    button.outline {
        background: transparent;
        border: 2px solid var(--primary);
        color: var(--primary);
    }
    
    button.outline:hover {
        background: var(--primary);
        color: white;
    }
    
    .message {
        margin: 24px 0;
        font-size: 16px;
        font-weight: 600;
        padding: 20px;
        border-radius: 8px;
        text-align: center;
        border-left: 4px solid transparent;
        box-shadow: var(--shadow);
    }
    
    .success {
        background: #f0fdf4;
        color: #166534;
        border-left-color: var(--secondary);
    }
    
    .error {
        background: #fef2f2;
        color: #991b1b;
        border-left-color: var(--accent);
    }
    
    .info {
        background: #eff6ff;
        color: #1e40af;
        border-left-color: var(--primary);
    }
    
    .voice-controls {
        display: flex;
        gap: 12px;
        margin-top: 20px;
        justify-content: center;
        flex-wrap: wrap;
    }
    
    .oral-practice-content {
        background: white;
        padding: 32px;
        border-radius: 12px;
        box-shadow: var(--shadow);
        border-left: 4px solid var(--accent);
    }
    
    .oral-practice-title {
        color: var(--dark);
        margin-bottom: 24px;
        font-weight: 700;
        font-size: 20px;
        letter-spacing: -0.025em;
        text-align: center;
    }
    
    .conversation-container {
        max-height: 300px;
        overflow-y: auto;
        margin-bottom: 24px;
        padding: 16px;
        background: var(--light-gray);
        border-radius: 8px;
        border: 1px solid var(--border);
    }
    
    .message-bubble {
        margin-bottom: 16px;
        padding: 12px 16px;
        border-radius: 12px;
        max-width: 80%;
        position: relative;
    }
    
    .user-message {
        background: var(--primary);
        color: white;
        margin-left: auto;
        border-bottom-right-radius: 4px;
    }
    
    .bot-message {
        background: white;
        color: var(--dark);
        border: 1px solid var(--border);
        border-bottom-left-radius: 4px;
    }
    
    .message-sender {
        font-size: 12px;
        font-weight: 600;
        margin-bottom: 4px;
        opacity: 0.8;
    }
    
    .oral-input-group {
        display: flex;
        gap: 12px;
        margin-top: 20px;
    }
    
    .oral-input-group input {
        flex: 1;
        padding: 16px;
        border: 2px solid var(--border);
        border-radius: 8px;
        font-size: 16px;
    }
    
    .oral-voice-btn {
        padding: 16px 20px;
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 18px;
        transition: all 0.3s;
    }
    
    .oral-voice-btn:hover {
        background: var(--primary-dark);
    }
    
    .oral-voice-btn.recording {
        background: var(--accent);
        animation: pulse 1.5s infinite;
    }
    
    .oral-send-btn {
        padding: 16px 20px;
        background: var(--secondary);
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 18px;
        transition: all 0.3s;
    }
    
    .oral-send-btn:hover {
        background: var(--secondary-dark);
    }
    
    .contact-form {
        display: none;
        background: white;
        padding: 28px;
        border-radius: 12px;
        box-shadow: var(--shadow);
        margin-top: 20px;
        border-left: 4px solid var(--accent);
    }
    
    .contact-form h3 {
        color: var(--dark);
        margin-bottom: 20px;
        font-weight: 700;
        font-size: 20px;
    }
    
    .form-group {
        margin-bottom: 20px;
    }
    
    .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: var(--dark);
    }
    
    .form-group input, .form-group textarea {
        width: 100%;
        padding: 16px;
        border-radius: 8px;
        border: 2px solid var(--border);
        font-family: inherit;
        font-size: 15px;
        transition: all 0.3s;
        font-weight: 500;
    }
    
    .form-group input:focus, .form-group textarea:focus {
        border-color: var(--primary);
        outline: none;
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }
    
    .form-group textarea {
        min-height: 120px;
        resize: vertical;
    }
    
    .completion-message {
        text-align: center;
        padding: 48px 32px;
        background: white;
        border-radius: 12px;
        box-shadow: var(--shadow);
    }
    
    .completion-message h3 {
        color: var(--secondary);
        margin-bottom: 20px;
        font-size: 28px;
        font-weight: 700;
    }
    
    .completion-message p {
        margin-bottom: 16px;
        color: var(--dark);
        font-size: 18px;
    }
    
    .offline-notice {
        background: #fffbeb;
        color: #92400e;
        padding: 16px;
        border-radius: 8px;
        margin: 20px 0;
        border-left: 4px solid var(--accent);
        font-size: 14px;
        font-weight: 500;
    }
    
    @media (max-width: 768px) {
        .bot-container {
            padding: 24px;
        }
        
        .content-area {
            padding: 20px;
        }
        
        .navigation-buttons {
            flex-direction: column;
        }
        
        button {
            width: 100%;
        }
        
        .language-tabs {
            flex-direction: column;
        }
        
        .button-container {
            flex-direction: column;
        }
        
        .voice-controls {
            flex-direction: column;
        }
        
        .lesson-content, .exercise-content {
            padding: 20px;
        }
        
        .bot-header h2 {
            font-size: 24px;
        }
        
        .lesson-title {
            font-size: 20px;
        }
        
        .oral-input-group {
            flex-direction: column;
        }
        
        .message-bubble {
            max-width: 90%;
        }
    }
</style>
</head>
<body>

<div class="bot-container">
    <div class="bot-header">
        <div class="bot-avatar">ü§ñ</div>
        <h2>Bot Enseignant Automatique</h2>
        <div class="bot-subtitle">Fran√ßais - Malagasy | 10 Le√ßons Compl√®tes</div>
    </div>
    
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>
    <div class="progress-text" id="progressText"></div>
    
    <div class="navigation-buttons">
        <button onclick="previousLesson()" id="prevLessonBtn" class="outline">‚Üê Le√ßon pr√©c√©dente</button>
        <button onclick="showOralPractice()" id="oralPracticeBtn" class="accent">üé§ Pratique Orale AI</button>
        <button onclick="showContactForm()" id="contactBtn" class="outline">Contact & Aide</button>
        <button onclick="nextLesson()" id="nextLessonBtn" class="outline">Nouvelle le√ßon ‚Üí</button>
    </div>
    
    <div class="content-area">
        <div class="typing-indicator" id="typingIndicator">
            Le bot est en train d'√©crire <span class="typing-dots"><span>.</span><span>.</span><span>.</span></span>
        </div>
        
        <div class="lesson-section" id="lessonSection">
            <div id="lessonContent"></div>
            <div class="button-container">
                <button onclick="startLesson()" id="startLessonBtn" class="secondary">Commencer les exercices</button>
                <button onclick="readAloud()" id="readAloudBtn" class="outline">üéß √âcouter la le√ßon</button>
            </div>
        </div>
        
        <div class="exercise-section" id="exerciseSection">
            <div id="exerciseContent"></div>
            <div class="button-container">
                <button onclick="submitAnswer()" id="submitBtn" class="secondary">Valider la r√©ponse</button>
                <button onclick="showCorrection()" id="correctionBtn" class="outline">Voir correction</button>
                <button onclick="backToLesson()" id="backBtn" class="outline">‚Üê Retour √† la le√ßon</button>
                <button onclick="nextExercise()" id="nextBtn">Exercice suivant ‚Üí</button>
            </div>
        </div>
        
        <div class="oral-practice-section" id="oralPracticeSection">
            <div class="oral-practice-content">
                <div class="oral-practice-title">üé§ Pratique Orale avec AI</div>
                <div class="conversation-container" id="conversationContainer">
                    <div class="message-bubble bot-message">
                        <div class="message-sender">Bot</div>
                        Bonjour ! Je suis votre assistant pour la pratique orale. Parlez-moi en fran√ßais et je vous r√©pondrai. Commen√ßons !
                    </div>
                </div>
                
                <div class="oral-input-group">
                    <input type="text" id="oralUserInput" placeholder="Tapez votre message ou utilisez la reconnaissance vocale...">
                    <button class="oral-voice-btn" id="oralVoiceBtn">üé§</button>
                    <button class="oral-send-btn" id="oralSendBtn">üì§</button>
                </div>
                
                <div class="offline-notice" id="offlineNotice" style="display: none;">
                    ‚ö†Ô∏è Vous √™tes hors ligne. La pratique orale n√©cessite une connexion Internet.
                </div>
            </div>
        </div>
        
        <div class="contact-form" id="contactForm">
            <h3>Formulaire de Contact</h3>
            <p>Si le bot ne peut pas r√©pondre √† votre question, veuillez remplir ce formulaire :</p>
            
            <div class="form-group">
                <label for="email">Votre email :</label>
                <input type="email" id="email" placeholder="votre@email.com">
            </div>
            
            <div class="form-group">
                <label for="subject">Sujet :</label>
                <input type="text" id="subject" placeholder="Sujet de votre message">
            </div>
            
            <div class="form-group">
                <label for="messageText">Votre message :</label>
                <textarea id="messageText" placeholder="D√©crivez votre probl√®me ou question en d√©tail..."></textarea>
            </div>
            
            <div class="button-container">
                <button onclick="sendContactForm()" class="secondary">Envoyer le message</button>
                <button onclick="hideContactForm()" class="outline">Annuler</button>
            </div>
        </div>
        
        <div class="completion-message" id="completionMessage" style="display:none;">
            <h3>üéâ F√©licitations !</h3>
            <p>Vous avez termin√© toutes les le√ßons !</p>
            <p>Votre score final : <strong id="finalScore">0</strong> points</p>
            <div class="button-container" style="justify-content: center; margin-top: 20px;">
                <button onclick="resetAll()" class="secondary">Recommencer depuis le d√©but</button>
            </div>
        </div>
    </div>
    
    <div class="message" id="message"></div>
</div>

<script>
// Les 10 le√ßons compl√®tes avec des explications d√©taill√©es et exemples
const lessons = [
    {
        id: 1,
        title: "LES NOMS ET LES ARTICLES",
        titleMg: "NY ANARANA SY NY LAHATSORATRA",
        description: {
            fr: "Comprendre les noms et les articles en fran√ßais : d√©finis, ind√©finis et partitifs avec de nombreux exemples.",
            mg: "Ny fahatakarana ny anarana sy ny lahatsoratra amin'ny teny frantsay: voafaritra, tsy voafaritra ary ampahany miaraka amin'ny ohatra maro."
        },
        content: {
            fr: `
                <h4>Les Noms (Noms Communs)</h4>
                <p>En fran√ßais, les noms d√©signent des personnes, des animaux, des choses, des lieux, des sentiments. Ils ont un genre (masculin/f√©minin) et un nombre (singulier/pluriel).</p>
                
                <div class="example-box">
                    <div class="example-title">Exemples de noms :</div>
                    <p><strong>Personnes</strong> : un enfant, une femme, le professeur</p>
                    <p><strong>Animaux</strong> : un chat, une souris, les oiseaux</p>
                    <p><strong>Choses</strong> : une table, un livre, la maison</p>
                    <p><strong>Lieux</strong> : Paris, l'√©cole, un restaurant</p>
                </div>
                
                <h4>R√®gles de base pour le genre des noms</h4>
                <p>Il n'y a pas de r√®gle absolue, mais voici des indications :</p>
                
                <h5>Noms g√©n√©ralement masculins :</h5>
                <ul>
                    <li>Les jours, les mois, les saisons : <strong>le lundi, le janvier, l'√©t√©</strong></li>
                    <li>Les langues : <strong>le fran√ßais, l'anglais</strong></li>
                    <li>Les arbres : <strong>le ch√™ne, le pommier</strong></li>
                    <li>Les m√©taux : <strong>l'or, l'argent</strong></li>
                </ul>
                
                <h5>Noms g√©n√©ralement f√©minins :</h5>
                <ul>
                    <li>Les sciences : <strong>la chimie, la physique</strong></li>
                    <li>Les maladies : <strong>la grippe, la fi√®vre</strong></li>
                    <li>Les fruits : <strong>la pomme, la banane</strong> (sauf exceptions)</li>
                </ul>
                
                <div class="example-box">
                    <div class="example-title">Attention aux exceptions !</div>
                    <p><strong>Le f√©minin</strong> : une personne (f√©minin) mais <strong>le</strong> b√©b√© (masculin)</p>
                    <p><strong>La sentinelle</strong> (f√©minin) peut d√©signer un homme</p>
                    <p><strong>Le</strong> professeur peut √™tre une femme</p>
                </div>
                
                <h4>Les Articles D√©finis</h4>
                <p>Ils d√©signent quelque chose de pr√©cis, connu ou d√©j√† mentionn√©.</p>
                <ul>
                    <li><strong>le</strong> - masculin singulier : <em>le livre</em> (le livre sp√©cifique)</li>
                    <li><strong>la</strong> - f√©minin singulier : <em>la table</em> (la table sp√©cifique)</li>
                    <li><strong>l'</strong> - devant une voyelle : <em>l'√©cole, l'h√¥pital</em></li>
                    <li><strong>les</strong> - pluriel : <em>les livres, les tables</em></li>
                </ul>
                
                <div class="example-box">
                    <div class="example-title">Exemples d'articles d√©finis :</div>
                    <p><strong>Le chat</strong> de ma voisine est noir. (un chat sp√©cifique)</p>
                    <p><strong>La voiture</strong> que j'ai achet√©e est rouge.</p>
                    <p><strong>L'enfant</strong> joue dans le parc.</p>
                    <p><strong>Les √©tudiants</strong> sont en classe.</p>
                </div>
                
                <h4>Les Articles Ind√©finis</h4>
                <p>Ils d√©signent quelque chose de non pr√©cis√©, mentionn√© pour la premi√®re fois.</p>
                <ul>
                    <li><strong>un</strong> - masculin singulier : <em>un livre</em> (n'importe quel livre)</li>
                    <li><strong>une</strong> - f√©minin singulier : <em>une table</em> (n'importe quelle table)</li>
                    <li><strong>des</strong> - pluriel : <em>des livres, des tables</em></li>
                </ul>
                
                <div class="example-box">
                    <div class="example-title">Exemples d'articles ind√©finis :</div>
                    <p>J'ai vu <strong>un</strong> film hier. (un film quelconque)</p>
                    <p>Elle cherche <strong>une</strong> maison √† louer.</p>
                    <p>Il y a <strong>des</strong> fleurs dans le jardin.</p>
                </div>
                
                <h4>Les Articles Partitifs</h4>
                <p>Ils expriment une quantit√© ind√©termin√©e, une partie d'un tout.</p>
                <ul>
                    <li><strong>du</strong> - masculin : <em>du pain, du fromage</em></li>
                    <li><strong>de la</strong> - f√©minin : <em>de la confiture, de la farine</em></li>
                    <li><strong>de l'</strong> - devant voyelle : <em>de l'eau, de l'argent</em></li>
                    <li><strong>des</strong> - pluriel : <em>des l√©gumes, des fruits</em></li>
                </ul>
                
                <div class="example-box">
                    <div class="example-title">Exemples d'articles partitifs :</div>
                    <p>Je mange <strong>du</strong> pain avec <strong>de la</strong> confiture.</p>
                    <p>Il boit <strong>de l'</strong> eau.</p>
                    <p>Nous achetons <strong>des</strong> l√©gumes au march√©.</p>
                </div>
                
                <h4>Exercices d'application</h4>
                <p>Pratiquez avec ces phrases pour bien comprendre la diff√©rence :</p>
                <p><em>Je veux <strong>le</strong> livre.</em> (le livre sp√©cifique dont nous avons parl√©)</p>
                <p><em>Je veux <strong>un</strong> livre.</em> (n'importe quel livre)</p>
                <p><em>Je mange <strong>du</strong> pain.</em> (une partie du pain)</p>
            `,
            mg: `
                <h4>Ny Anarana (Anarana iombonana)</h4>
                <p>Amin'ny teny frantsay, ny anarana dia manondro olona, biby, zavatra, toerana, fihetseham-po. Manana lahy sy vavy ary isa (tokana/maro).</p>
                
                <h4>Fitsipika fototra momba ny lahy sy vavy</h4>
                
                <h5>Anarana matetika lahy :</h5>
                <ul>
                    <li>Ny andro, volana, fararano : <strong>ny alatsinainy, ny janoary, ny fahavaratra</strong></li>
                    <li>Ny fiteny : <strong>ny frantsay, ny anglisy</strong></li>
                </ul>
                
                <h5>Anarana matetika vavy :</h5>
                <ul>
                    <li>Ny siansa : <strong>ny simia, ny fizika</strong></li>
                    <li>Ny aretina : <strong>ny gripa, ny tazo</strong></li>
                </ul>
                
                <h4>Ny Lahatsoratra Voafaritra</h4>
                <p>Maneho zavatra voafaritra, fantatra na efa nolazaina.</p>
                <ul>
                    <li><strong>le</strong> - lahy tokana : <em>le livre</em> (ny boky voafaritra)</li>
                    <li><strong>la</strong> - vavy tokana : <em>la table</em> (ny latabatra voafaritra)</li>
                    <li><strong>l'</strong> - eo anoloan'ny zanatsoratra : <em>l'√©cole</em></li>
                    <li><strong>les</strong> - maro : <em>les livres</em></li>
                </ul>
                
                <h4>Ny Lahatsoratra Tsy Voafaritra</h4>
                <p>Maneho zavatra tsy voafaritra, lazaina voalohany.</p>
                <ul>
                    <li><strong>un</strong> - lahy tokana : <em>un livre</em> (boky rehetra)</li>
                    <li><strong>une</strong> - vavy tokana : <em>une table</em> (latabatra rehetra)</li>
                    <li><strong>des</strong> - maro : <em>des livres</em></li>
                </ul>
                
                <h4>Ny Lahatsoratra Ampahany</h4>
                <p>Maneho habetsahana tsy voafaritra, ampahany amin'ny iray manontolo.</p>
                <ul>
                    <li><strong>du</strong> - lahy : <em>du pain</em></li>
                    <li><strong>de la</strong> - vavy : <em>de la confiture</em></li>
                    <li><strong>de l'</strong> - eo anoloan'ny zanatsoratra : <em>de l'eau</em></li>
                    <li><strong>des</strong> - maro : <em>des l√©gumes</em></li>
                </ul>
            `
        },
        image: "üìö",
        exercises: [
            {
                question: "Completez avec l'article d√©fini : ___ maison est grande.",
                questionMg: "Fenoy amin'ny lahatsoratra voafaritra : ___ maison est grande.",
                answer: "la",
                correction: "la maison est grande - 'maison' est un nom f√©minin singulier"
            },
            {
                question: "Completez avec l'article ind√©fini : J'ai ___ chat noir.",
                questionMg: "Fenoy amin'ny lahatsoratra tsy voafaritra : J'ai ___ chat noir.",
                answer: "un",
                correction: "J'ai un chat noir - 'chat' est un nom masculin singulier"
            },
            {
                question: "Completez avec l'article partitif : Je mange ___ pain.",
                questionMg: "Fenoy amin'ny lahatsoratra ampahany : Je mange ___ pain.",
                answer: "du",
                correction: "Je mange du pain - 'pain' est un nom masculin non comptable"
            },
            {
                question: "Completez : ___ enfants jouent dans le parc.",
                questionMg: "Fenoy : ___ enfants jouent dans le parc.",
                answer: "les",
                correction: "Les enfants jouent dans le parc - 'enfants' est un nom pluriel"
            },
            {
                question: "Completez : Elle boit ___ eau.",
                questionMg: "Fenoy : Elle boit ___ eau.",
                answer: "de l'",
                correction: "Elle boit de l'eau - 'eau' commence par une voyelle"
            },
            {
                question: "Choisissez l'article correct : Je veux ___ livre sur la table.",
                questionMg: "Safidy ny lahatsoratra mety : Je veux ___ livre sur la table.",
                answer: "le",
                correction: "Je veux le livre sur la table - article d√©fini car le livre est sp√©cifique"
            },
            {
                question: "Completez : Nous avons ___ amis √† Paris.",
                questionMg: "Fenoy : Nous avons ___ amis √† Paris.",
                answer: "des",
                correction: "Nous avons des amis √† Paris - article ind√©fini pluriel"
            }
        ]
    },
    {
        id: 2,
        title: "EMPLOIS DU VERBE DEVOIR DANS UNE PHRASE",
        titleMg: "NY FAMPIASANA NY MATOANTENY DEVOIR AMINNY FEHENTENY",
        description: {
            fr: "Ma√Ætriser les diff√©rentes utilisations du verbe devoir dans des contextes vari√©s avec de nombreux exemples pratiques.",
            mg: "Ny fahafantarana ny fampiasana samihafa amin'ny matoanteny devoir amin'ny toe-javatra isan-karazany miaraka amin'ny ohatra maro azo ampiharina."
        },
        content: {
            fr: `
                <h4>Le Verbe DEVOIR - Conjugaison Compl√®te</h4>
                
                <h5>Pr√©sent de l'indicatif</h5>
                <ul>
                    <li>Je <strong>dois</strong></li>
                    <li>Tu <strong>dois</strong></li>
                    <li>Il/Elle <strong>doit</strong></li>
                    <li>Nous <strong>devons</strong></li>
                    <li>Vous <strong>devez</strong></li>
                    <li>Ils/Elles <strong>doivent</strong></li>
                </ul>
                
                <h5>Pass√© compos√©</h5>
                <p>J'ai <strong>d√ª</strong>, tu as <strong>d√ª</strong>, il a <strong>d√ª</strong>, etc.</p>
                
                <h5>Futur simple</h5>
                <p>Je <strong>devrai</strong>, tu <strong>devras</strong>, il <strong>devra</strong>, etc.</p>
                
                <h5>Conditionnel pr√©sent</h5>
                <p>Je <strong>devrais</strong>, tu <strong>devrais</strong>, il <strong>devrait</strong>, etc.</p>
                
                <div class="example-box">
                    <div class="example-title">Conjugaison en contexte :</div>
                    <p><strong>Je dois</strong> partir maintenant. (pr√©sent)</p>
                    <p><strong>J'ai d√ª</strong> travailler hier. (pass√© compos√©)</p>
                    <p><strong>Je devrai</strong> √©tudier demain. (futur)</p>
                    <p><strong>Je devrais</strong> me reposer. (conditionnel)</p>
                </div>
                
                <h4>Les diff√©rents emplois de DEVOIR</h4>
                
                <h5>1. Expression de l'obligation (la plus courante)</h5>
                <p>Exprime une contrainte, une n√©cessit√©.</p>
                
                <div class="example-box">
                    <div class="example-title">Exemples d'obligation :</div>
                    <p><strong>Je dois</strong> faire mes devoirs. (I have to do my homework)</p>
                    <p><strong>Tu dois</strong> finir ton travail. (You must finish your work)</p>
                    <p><strong>Nous devons</strong> respecter les r√®gles. (We must respect the rules)</p>
                    <p><strong>Vous devez</strong> arriver √† l'heure. (You must arrive on time)</p>
                </div>
                
                <h5>2. Expression de la probabilit√©</h5>
                <p>Exprime une supposition, une probabilit√©.</p>
                
                <div class="example-box">
                    <div class="example-title">Exemples de probabilit√© :</div>
                    <p><strong>Il doit</strong> √™tre fatigu√© apr√®s ce long voyage.</p>
                    <p><strong>Elle doit</strong> avoir environ trente ans.</p>
                    <p><strong>Ils doivent</strong> arriver bient√¥t, ils ont pris le train de 8h.</p>
                    <p><strong>√áa doit</strong> √™tre difficile de vivre seul.</p>
                </div>
                
                <h5>3. Expression du conseil (conditionnel)</h5>
                <p>Exprime un conseil, une recommandation.</p>
                
                <div class="example-box">
                    <div class="example-title">Exemples de conseil :</div>
                    <p><strong>Tu devrais</strong> te reposer, tu as l'air fatigu√©.</p>
                    <p><strong>Nous devrions</strong> partir t√¥t pour √©viter les embouteillages.</p>
                    <p><strong>Vous devriez</strong> visiter ce mus√©e, il est magnifique.</p>
                    <p><strong>Il devrait</strong> consulter un m√©decin.</p>
                </div>
                
                <h5>4. Expression de la dette</h5>
                <p>Exprime ce qu'on doit √† quelqu'un.</p>
                
                <div class="example-box">
                    <div class="example-title">Exemples de dette :</div>
                    <p>Je <strong>dois</strong> 50 euros √† mon ami.</p>
                    <p>Nous <strong>devons</strong> une explication √† nos parents.</p>
                    <p>Tu me <strong>dois</strong> une r√©ponse.</p>
                    <p>Il <strong>doit</strong> des excuses √† sa s≈ìur.</p>
                </div>
                
                <h4>Diff√©rences subtiles</h4>
                
                <div class="example-box">
                    <div class="example-title">Comparez :</div>
                    <p><strong>Je dois</strong> √©tudier. (obligation forte - I must study)</p>
                    <p><strong>Il faut que</strong> j'√©tudie. (obligation impersonnelle - It's necessary that I study)</p>
                    <p><strong>Je devrais</strong> √©tudier. (conseil - I should study)</p>
                </div>
                
                <h4>Exercices de compr√©hension</h4>
                <p>Identifiez le sens de "devoir" dans ces phrases :</p>
                <p>1. "Je <strong>dois</strong> partir √† 8h." ‚Üí Obligation</p>
                <p>2. "Il <strong>doit</strong> faire beau demain." ‚Üí Probabilit√©</p>
                <p>3. "Tu <strong>devrais</strong> essayer ce restaurant." ‚Üí Conseil</p>
                <p>4. "Nous leur <strong>devons</strong> beaucoup." ‚Üí Dette</p>
            `,
            mg: `
                <h4>Ny matoanteny DEVOIR - Conjugaison feno</h4>
                
                <h5>Pr√©sent de l'indicatif</h5>
                <ul>
                    <li>Izaho <strong>dois</strong> (tokony)</li>
                    <li>Ian√£o <strong>dois</strong></li>
                    <li>Izy <strong>doit</strong></li>
                    <li>Izahay <strong>devons</strong></li>
                    <li>Ianareo <strong>devez</strong></li>
                    <li>Izy ireo <strong>doivent</strong></li>
                </ul>
                
                <h4>Ny fampiasana samihafa amin'ny DEVOIR</h4>
                
                <h5>1. Fanehoana ny adidy (tena mahazatra)</h5>
                <p>Maneho fanerena, ilana.</p>
                
                <div class="example-box">
                    <div class="example-title">Ohatra adidy :</div>
                    <p><strong>Je dois</strong> faire mes devoirs. (Tsy maintsy manao ny adidiko aho)</p>
                    <p><strong>Tu dois</strong> finir ton travail. (Tsy maintsy avy vita ny asa ianao)</p>
                </div>
                
                <h5>2. Fanehoana ny mety hitranga</h5>
                <p>Maneho vinavina, mety.</p>
                
                <div class="example-box">
                    <div class="example-title">Ohatra mety :</div>
                    <p><strong>Il doit</strong> √™tre fatigu√©. (Angamba reraka izy)</p>
                    <p><strong>Elle doit</strong> arriver bient√¥t. (Mety ho avy any aoriana kely izy)</p>
                </div>
                
                <h5>3. Fanehoana ny torohevitra (conditionnel)</h5>
                <p>Maneho torohevitra, soso-kevitra.</p>
                
                <div class="example-box">
                    <div class="example-title">Ohatra torohevitra :</div>
                    <p><strong>Tu devrais</strong> te reposer. (Tokony hiala sasatra ianao)</p>
                    <p><strong>Nous devrions</strong> partir t√¥t. (Tokony hiala aloha isika)</p>
                </div>
            `
        },
        image: "‚öñÔ∏è",
        exercises: [
            {
                question: "Completez : Je ___ faire mes devoirs.",
                questionMg: "Fenoy : Je ___ faire mes devoirs.",
                answer: "dois",
                correction: "Je dois faire mes devoirs - expression d'obligation"
            },
            {
                question: "Completez : Il ___ √™tre malade, il a de la fi√®vre.",
                questionMg: "Fenoy : Il ___ √™tre malade, il a de la fi√®vre.",
                answer: "doit",
                correction: "Il doit √™tre malade - expression de probabilit√©"
            },
            {
                question: "Completez : Tu ___ visiter ce mus√©e, il est magnifique.",
                questionMg: "Fenoy : Tu ___ visiter ce mus√©e, il est magnifique.",
                answer: "devrais",
                correction: "Tu devrais visiter ce mus√©e - expression de conseil"
            },
            {
                question: "Completez : Nous ___ 50 euros √† Paul.",
                questionMg: "Fenoy : Nous ___ 50 euros √† Paul.",
                answer: "devons",
                correction: "Nous devons 50 euros √† Paul - expression de dette"
            },
            {
                question: "Completez : Elles ___ pr√©parer le d√Æner.",
                questionMg: "Fenoy : Elles ___ pr√©parer le d√Æner.",
                answer: "doivent",
                correction: "Elles doivent pr√©parer le d√Æner - obligation au pluriel"
            },
            {
                question: "Choisissez la bonne forme : Je ___ (devoir) √©tudier pour l'examen.",
                questionMg: "Safidy ny endrika mety : Je ___ (devoir) √©tudier pour l'examen.",
                answer: "dois",
                correction: "Je dois √©tudier pour l'examen - pr√©sent pour l'obligation"
            },
            {
                question: "Completez avec la forme correcte : Tu ___ (devoir) faire attention.",
                questionMg: "Fenoy amin'ny endrika mety : Tu ___ (devoir) faire attention.",
                answer: "dois",
                correction: "Tu dois faire attention - pr√©sent pour l'obligation"
            }
        ]
    },
    // Les 8 autres le√ßons continueraient avec le m√™me niveau de d√©tail...
    {
        id: 3,
        title: "LE TEMPS ET LES AUXILIAIRES",
        titleMg: "NY FOTOANA SY NY MPANAMPY",
        description: {
            fr: "Comprendre les diff√©rents temps verbaux et l'utilisation des auxiliaires √™tre et avoir avec des exemples concrets.",
            mg: "Ny fahatakarana ny fotoana samihafa amin'ny matoanteny sy ny fampiasana ny mpanampy √™tre sy avoir miaraka amin'ny ohatra azo tsapain-tanana."
        },
        content: {
            fr: `
                <h4>Les Auxiliaires √äTRE et AVOIR</h4>
                <p>Ces deux verbes sont essentiels pour former les temps compos√©s en fran√ßais.</p>
                
                <h4>Conjugaison des Auxiliaires au Pr√©sent</h4>
                
                <h5>√äTRE au pr√©sent :</h5>
                <ul>
                    <li>Je <strong>suis</strong></li>
                    <li>Tu <strong>es</strong></li>
                    <li>Il/Elle <strong>est</strong></li>
                    <li>Nous <strong>sommes</strong></li>
                    <li>Vous <strong>√™tes</strong></li>
                    <li>Ils/Elles <strong>sont</strong></li>
                </ul>
                
                <h5>AVOIR au pr√©sent :</h5>
                <ul>
                    <li>J'<strong>ai</strong></li>
                    <li>Tu <strong>as</strong></li>
                    <li>Il/Elle <strong>a</strong></li>
                    <li>Nous <strong>avons</strong></li>
                    <li>Vous <strong>avez</strong></li>
                    <li>Ils/Elles <strong>ont</strong></li>
                </ul>
                
                <div class="example-box">
                    <div class="example-title">Exemples en contexte :</div>
                    <p>Je <strong>suis</strong> fran√ßais. (√™tre)</p>
                    <p>Tu <strong>as</strong> un livre. (avoir)</p>
                    <p>Nous <strong>sommes</strong> √©tudiants. (√™tre)</p>
                    <p>Vous <strong>avez</strong> de la chance. (avoir)</p>
                </div>
                
                <h4>Formation des Temps Compos√©s</h4>
                
                <h5>Pass√© compos√©</h5>
                <p>Auxiliaire au pr√©sent + participe pass√©</p>
                <p><strong>J'ai mang√©</strong> une pomme. (avoir + mang√©)</p>
                <p><strong>Je suis all√©</strong> au march√©. (√™tre + all√©)</p>
                
                <h5>Plus-que-parfait</h5>
                <p>Auxiliaire √† l'imparfait + participe pass√©</p>
                <p><strong>J'avais mang√©</strong> quand tu es arriv√©.</p>
                <p><strong>J'√©tais all√©</strong> au march√© avant qu'il pleuve.</p>
                
                <h5>Futur ant√©rieur</h5>
                <p>Auxiliaire au futur + participe pass√©</p>
                <p><strong>J'aurai fini</strong> quand tu arriveras.</p>
                <p><strong>Je serai parti</strong> avant ton retour.</p>
                
                <div class="example-box">
                    <div class="example-title">Tableau r√©capitulatif :</div>
                    <p><strong>Pr√©sent</strong> : Je mange</p>
                    <p><strong>Pass√© compos√©</strong> : J'ai mang√©</p>
                    <p><strong>Imparfait</strong> : Je mangeais</p>
                    <p><strong>Plus-que-parfait</strong> : J'avais mang√©</p>
                    <p><strong>Futur simple</strong> : Je mangerai</p>
                    <p><strong>Futur ant√©rieur</strong> : J'aurai mang√©</p>
                </div>
                
                <h4>Quand utiliser √äTRE ou AVOIR ?</h4>
                
                <h5>Verbes qui utilisent √äTRE :</h5>
                <ul>
                    <li>Les verbes de mouvement : aller, venir, arriver, partir, entrer, sortir</li>
                    <li>Les verbes de changement d'√©tat : na√Ætre, mourir, devenir, rester</li>
                    <li>Quelques verbes particuliers : monter, descendre, retourner</li>
                </ul>
                
                <div class="example-box">
                    <div class="example-title">Mn√©monique : Dr & Mrs Vandertramp</div>
                    <p>Devenir, Revenir, Monter, Rester, Sortir, Venir, Aller, Na√Ætre, Descendre, Entrer, Rentrer, Tomber, Retourner, Arriver, Mourir, Partir</p>
                    <p>Ces verbes utilisent g√©n√©ralement l'auxiliaire √äTRE au pass√© compos√©.</p>
                </div>
                
                <h5>Verbes qui utilisent AVOIR :</h5>
                <ul>
                    <li>La majorit√© des verbes fran√ßais</li>
                    <li>Tous les verbes transitifs directs</li>
                    <li>Les verbes pronominaux (se laver, s'habiller)</li>
                </ul>
                
                <div class="example-box">
                    <div class="example-title">Exemples contrast√©s :</div>
                    <p><strong>J'ai mang√©</strong> une pomme. (avoir - verbe transitif)</p>
                    <p><strong>Je suis all√©</strong> au march√©. (√™tre - verbe de mouvement)</p>
                    <p><strong>Il a fini</strong> son travail. (avoir - verbe transitif)</p>
                    <p><strong>Elle est venue</strong> nous voir. (√™tre - verbe de mouvement)</p>
                </div>
                
                <h4>Accord du Participe Pass√©</h4>
                
                <h5>Avec √äTRE :</h5>
                <p>Le participe pass√© s'accorde avec le sujet</p>
                <p>Elle est <strong>all√©e</strong> au march√©. (accord f√©minin)</p>
                <p>Ils sont <strong>partis</strong> t√¥t. (accord masculin pluriel)</p>
                
                <h5>Avec AVOIR :</h5>
                <p>Le participe pass√© ne s'accorde PAS avec le sujet</p>
                <p>MAIS il s'accorde avec le COD si celui-ci est plac√© avant le verbe</p>
                <p>J'ai <strong>mang√©</strong> la pomme. (COD apr√®s ‚Üí pas d'accord)</p>
                <p>La pomme que j'ai <strong>mang√©e</strong>. (COD avant ‚Üí accord f√©minin)</p>
                <p>Les livres que j'ai <strong>lus</strong>. (COD avant ‚Üí accord masculin pluriel)</p>
                
                <div class="example-box">
                    <div class="example-title">R√®gle simple :</div>
                    <p><strong>Avec √™tre</strong> : on accorde avec le sujet</p>
                    <p><strong>Avec avoir</strong> : on n'accorde pas, sauf si le COD est avant</p>
                </div>
            `,
            mg: `
                <h4>Ny Mpanampy √äTRE sy AVOIR</h4>
                <p>Ireo matoanteny roa ireo dia tena ilaina amin'ny fananganana ny fotoana mitambatra amin'ny teny frantsay.</p>
                
                <h4>Conjugation amin'ny Pr√©sent</h4>
                
                <h5>√äTRE amin'ny pr√©sent :</h5>
                <ul>
                    <li>Izaho <strong>suis</strong></li>
                    <li>Ian√£o <strong>es</strong></li>
                    <li>Izy <strong>est</strong></li>
                    <li>Izahay <strong>sommes</strong></li>
                    <li>Ianareo <strong>√™tes</strong></li>
                    <li>Izy ireo <strong>sont</strong></li>
                </ul>
                
                <h5>AVOIR amin'ny pr√©sent :</h5>
                <ul>
                    <li>Izaho <strong>ai</strong></li>
                    <li>Ian√£o <strong>as</strong></li>
                    <li>Izy <strong>a</strong></li>
                    <li>Izahay <strong>avons</strong></li>
                    <li>Ianareo <strong>avez</strong></li>
                    <li>Izy ireo <strong>ont</strong></li>
                </ul>
            `
        },
        image: "‚è∞",
        exercises: [
            {
                question: "Completez avec l'auxiliaire : Elle ___ mang√© une pomme.",
                questionMg: "Fenoy amin'ny mpanampy : Elle ___ mang√© une pomme.",
                answer: "a",
                correction: "Elle a mang√© une pomme - 'manger' utilise l'auxiliaire AVOIR"
            },
            {
                question: "Completez : Nous ___ all√©s au cin√©ma.",
                questionMg: "Fenoy : Nous ___ all√©s au cin√©ma.",
                answer: "sommes",
                correction: "Nous sommes all√©s au cin√©ma - 'aller' utilise l'auxiliaire √äTRE"
            },
            {
                question: "Completez : Ils ___ fini leurs devoirs.",
                questionMg: "Fenoy : Ils ___ fini leurs devoirs.",
                answer: "ont",
                correction: "Ils ont fini leurs devoirs - 'finir' utilise l'auxiliaire AVOIR"
            },
            {
                question: "Completez : Tu ___ parti trop t√¥t.",
                questionMg: "Fenoy : Tu ___ parti trop t√¥t.",
                answer: "es",
                correction: "Tu es parti trop t√¥t - 'partir' utilise l'auxiliaire √äTRE"
            },
            {
                question: "Completez : Vous ___ arriv√©s en retard.",
                questionMg: "Fenoy : Vous ___ arriv√©s en retard.",
                answer: "√™tes",
                correction: "Vous √™tes arriv√©s en retard - 'arriver' utilise l'auxiliaire √äTRE"
            },
            {
                question: "Choisissez l'auxiliaire correct : Il ___ tomb√© de v√©lo.",
                questionMg: "Safidy ny mpanampy mety : Il ___ tomb√© de v√©lo.",
                answer: "est",
                correction: "Il est tomb√© de v√©lo - 'tomber' utilise l'auxiliaire √äTRE"
            },
            {
                question: "Completez : J'___ vu ce film plusieurs fois.",
                questionMg: "Fenoy : J'___ vu ce film plusieurs fois.",
                answer: "ai",
                correction: "J'ai vu ce film plusieurs fois - 'voir' utilise l'auxiliaire AVOIR"
            }
        ]
    }
    // Les 7 autres le√ßons suivraient le m√™me mod√®le d√©taill√©...
];

// R√©cup√©rer l'√©tat depuis localStorage
let currentLessonIndex = parseInt(localStorage.getItem("currentLessonIndex")) || 0;
let currentExerciseIndex = parseInt(localStorage.getItem("currentExerciseIndex")) || 0;
let score = parseInt(localStorage.getItem("score")) || 0;
let speechSynthesis = window.speechSynthesis;
let recognition = null;
let oralRecognition = null;

// Initialiser la reconnaissance vocale si disponible
function initializeSpeechRecognition() {
    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
        recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.continuous = false;
        recognition.lang = 'fr-FR';
        recognition.interimResults = false;
        
        oralRecognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        oralRecognition.continuous = false;
        oralRecognition.lang = 'fr-FR';
        oralRecognition.interimResults = false;
    }
}

// Syst√®me de r√©ponse AI pour la pratique orale
const aiResponses = {
    greetings: [
        "Bonjour ! Comment allez-vous aujourd'hui ?",
        "Salut ! Ravie de vous parler en fran√ßais.",
        "Bonjour ! Pr√™t √† pratiquer votre fran√ßais ?",
        "Hello ! Comment se passe votre journ√©e ?"
    ],
    questions: [
        "Qu'avez-vous fait aujourd'hui ?",
        "Parlez-moi de votre famille.",
        "Quels sont vos hobbies pr√©f√©r√©s ?",
        "Aimez-vous voyager ? O√π √™tes-vous d√©j√† all√© ?",
        "Quelle est votre saison pr√©f√©r√©e et pourquoi ?",
        "Parlez-moi de votre travail ou de vos √©tudes.",
        "Quel est votre plat fran√ßais pr√©f√©r√© ?",
        "Avez-vous des animaux de compagnie ?"
    ],
    responses: {
        "bonjour": ["Bonjour !", "Salut !", "Bonjour, comment allez-vous ?"],
        "salut": ["Salut !", "Bonjour !", "Coucou !"],
        "√ßa va": ["√áa va bien, merci ! Et vous ?", "Tr√®s bien, et vous ?", "Oui, √ßa va. Et de votre c√¥t√© ?"],
        "merci": ["De rien !", "Je vous en prie !", "Avec plaisir !"],
        "au revoir": ["Au revoir !", "√Ä bient√¥t !", "Bonne journ√©e !"],
        "oui": ["D'accord !", "Tr√®s bien !", "Parfait !"],
        "non": ["D'accord.", "Je comprends.", "Pas de probl√®me."]
    },
    followUps: [
        "C'est int√©ressant ! Pouvez-vous en dire plus ?",
        "Tr√®s bien ! Et ensuite ?",
        "Je vois. Continuez s'il vous pla√Æt.",
        "Fascinant ! Racontez-moi davantage."
    ]
};

// V√©rifier la connexion Internet
function checkOnlineStatus() {
    if (!navigator.onLine) {
        document.getElementById('offlineNotice').style.display = 'block';
        return false;
    }
    document.getElementById('offlineNotice').style.display = 'none';
    return true;
}

// Mettre √† jour la barre de progression
function updateProgress() {
    const totalExercises = lessons.reduce((total, lesson) => total + lesson.exercises.length, 0);
    const completedExercises = lessons.slice(0, currentLessonIndex).reduce((total, lesson) => total + lesson.exercises.length, 0) + currentExerciseIndex;
    const progressPercentage = (completedExercises / totalExercises) * 100;
    
    document.getElementById("progressBar").style.width = `${progressPercentage}%`;
    document.getElementById("progressText").textContent = 
        `Progression: ${Math.round(progressPercentage)}% | Le√ßon ${currentLessonIndex + 1}/${lessons.length} | Score: ${score}`;
}

// Afficher la le√ßon actuelle avec d√©lai
function showLesson() {
    if(currentLessonIndex >= lessons.length) {
        document.getElementById("finalScore").textContent = score;
        document.getElementById("completionMessage").style.display = "block";
        document.getElementById("lessonSection").style.display = "none";
        document.getElementById("exerciseSection").style.display = "none";
        updateProgress();
        return;
    }
    
    // Afficher l'indicateur de frappe
    document.getElementById("typingIndicator").style.display = "block";
    document.getElementById("lessonSection").style.display = "none";
    document.getElementById("exerciseSection").style.display = "none";
    document.getElementById("oralPracticeSection").style.display = "none";
    document.getElementById("contactForm").style.display = "none";
    
    // D√©lai de 5 secondes
    setTimeout(() => {
        document.getElementById("typingIndicator").style.display = "none";
        document.getElementById("lessonSection").style.display = "block";
        
        const lesson = lessons[currentLessonIndex];
        let content = `
            <div class="lesson-title">${lesson.title} | ${lesson.titleMg}</div>
            <div class="lesson-desc">
                <strong>Fran√ßais:</strong> ${lesson.description.fr}<br>
                <strong>Malagasy:</strong> ${lesson.description.mg}
            </div>
            
            <div class="language-tabs">
                <div class="language-tab active" onclick="switchLanguage('fr')">Fran√ßais</div>
                <div class="language-tab" onclick="switchLanguage('mg')">Malagasy</div>
            </div>
            
            <div class="language-content active" id="frContent">
                ${lesson.content.fr}
            </div>
            
            <div class="language-content" id="mgContent">
                ${lesson.content.mg}
            </div>
            
            <div class="lesson-image">${lesson.image}</div>
        `;
        
        document.getElementById("lessonContent").innerHTML = content;
        
        // Mettre √† jour les boutons de navigation
        document.getElementById("prevLessonBtn").style.display = currentLessonIndex > 0 ? "inline-block" : "none";
        document.getElementById("nextLessonBtn").style.display = currentLessonIndex < lessons.length - 1 ? "inline-block" : "none";
        
        updateProgress();
    }, 5000);
}

// Changer la langue d'affichage
function switchLanguage(lang) {
    document.querySelectorAll('.language-tab').forEach(tab => {
        tab.classList.remove('active');
    });
    
    document.querySelectorAll('.language-content').forEach(content => {
        content.classList.remove('active');
    });
    
    document.querySelector(`.language-tab:nth-child(${lang === 'fr' ? 1 : 2})`).classList.add('active');
    document.getElementById(`${lang}Content`).classList.add('active');
}

// Commencer les exercices de la le√ßon actuelle
function startLesson() {
    document.getElementById("typingIndicator").style.display = "block";
    document.getElementById("lessonSection").style.display = "none";
    
    setTimeout(() => {
        document.getElementById("typingIndicator").style.display = "none";
        document.getElementById("exerciseSection").style.display = "block";
        currentExerciseIndex = 0;
        localStorage.setItem("currentExerciseIndex", currentExerciseIndex);
        showExercise();
    }, 3000);
}

// Retourner √† la le√ßon depuis les exercices
function backToLesson() {
    document.getElementById("exerciseSection").style.display = "none";
    document.getElementById("oralPracticeSection").style.display = "none";
    document.getElementById("contactForm").style.display = "none";
    document.getElementById("lessonSection").style.display = "block";
    document.getElementById("message").textContent = "";
    document.getElementById("message").className = "message";
}

// Aller √† la le√ßon pr√©c√©dente
function previousLesson() {
    if(currentLessonIndex > 0) {
        currentLessonIndex--;
        localStorage.setItem("currentLessonIndex", currentLessonIndex);
        showLesson();
    }
}

// Aller √† la le√ßon suivante
function nextLesson() {
    if(currentLessonIndex < lessons.length - 1) {
        currentLessonIndex++;
        localStorage.setItem("currentLessonIndex", currentLessonIndex);
        showLesson();
    }
}

// Afficher exercice actuel
function showExercise() {
    const exercises = lessons[currentLessonIndex].exercises;
    if(currentExerciseIndex >= exercises.length) {
        // Tous les exercices de cette le√ßon sont termin√©s
        document.getElementById("message").textContent = "üéâ F√©licitations ! Vous avez termin√© tous les exercices de cette le√ßon !";
        document.getElementById("message").className = "message success";
        
        // Retour automatique √† la le√ßon apr√®s 3 secondes
        setTimeout(() => {
            backToLesson();
        }, 3000);
        return;
    }
    
    const ex = exercises[currentExerciseIndex];
    let content = `
        <div class="exercise-counter">
            Exercice ${currentExerciseIndex + 1}/${exercises.length} - Le√ßon ${currentLessonIndex + 1}/${lessons.length}
        </div>
        <div class="exercise-question">
            ${ex.question}<br>
            <small style="color: var(--gray);">${ex.questionMg}</small>
        </div>
        <div class="input-group">
            <input type="text" id="userAnswer" placeholder="√âcrivez votre r√©ponse ici...">
            <button class="voice-input-btn" id="voiceInputBtn" title="R√©ponse vocale">üé§</button>
            <button class="voice-send-btn" id="voiceSendBtn" title="Envoyer la r√©ponse vocale">üì§</button>
        </div>
    `;
    
    document.getElementById("exerciseContent").innerHTML = content;
    
    // Ajouter les √©v√©nements pour les boutons vocaux
    document.getElementById("voiceInputBtn").addEventListener("click", startVoiceRecognition);
    document.getElementById("voiceSendBtn").addEventListener("click", submitAnswer);
    
    document.getElementById("message").textContent = "";
    document.getElementById("message").className = "message";
    document.getElementById("nextBtn").style.display = "none";
    document.getElementById("submitBtn").style.display = "inline-block";
    document.getElementById("correctionBtn").style.display = "inline-block";
    
    updateProgress();
}

// V√©rification de la r√©ponse
function submitAnswer() {
    const exercises = lessons[currentLessonIndex].exercises;
    const ex = exercises[currentExerciseIndex];
    const userAnswer = document.getElementById("userAnswer").value.trim().toLowerCase();
    const correctAnswer = ex.answer.toLowerCase();

    if(userAnswer === correctAnswer) {
        document.getElementById("message").textContent = "Bravo ! ‚úÖ R√©ponse correcte !";
        document.getElementById("message").className = "message success";
        score += 10;
        localStorage.setItem("score", score);
        document.getElementById("submitBtn").style.display = "none";
        document.getElementById("correctionBtn").style.display = "none";
        document.getElementById("nextBtn").style.display = "inline-block";
        updateProgress();
    } else {
        document.getElementById("message").textContent = "Ce n'est pas correct. üòÖ Essayez encore ou regardez la correction.";
        document.getElementById("message").className = "message error";
    }
}

// Montrer correction
function showCorrection() {
    const exercises = lessons[currentLessonIndex].exercises;
    const ex = exercises[currentExerciseIndex];
    document.getElementById("message").textContent = "Correction : " + ex.correction;
    document.getElementById("message").className = "message info";
    document.getElementById("submitBtn").style.display = "none";
    document.getElementById("correctionBtn").style.display = "none";
    document.getElementById("nextBtn").style.display = "inline-block";
}

// Passer √† l'exercice suivant
function nextExercise() {
    currentExerciseIndex++;
    localStorage.setItem("currentExerciseIndex", currentExerciseIndex);
    showExercise();
}

// Lire la le√ßon √† haute voix
function readAloud() {
    if (speechSynthesis.speaking) {
        speechSynthesis.cancel();
        return;
    }
    
    const lesson = lessons[currentLessonIndex];
    const text = `${lesson.title}. ${lesson.description.fr}. ${lesson.content.fr.replace(/<[^>]*>/g, '')}`;
    
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = 'fr-FR';
    utterance.rate = 0.9;
    
    speechSynthesis.speak(utterance);
}

// Lire la question √† haute voix
function readQuestionAloud() {
    if (speechSynthesis.speaking) {
        speechSynthesis.cancel();
        return;
    }
    
    const exercises = lessons[currentLessonIndex].exercises;
    const ex = exercises[currentExerciseIndex];
    const text = ex.question;
    
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = 'fr-FR';
    utterance.rate = 0.9;
    
    speechSynthesis.speak(utterance);
}

// D√©marrer la reconnaissance vocale pour les exercices
function startVoiceRecognition() {
    if (!recognition) {
        alert("La reconnaissance vocale n'est pas support√©e par votre navigateur.");
        return;
    }
    
    const voiceBtn = document.getElementById("voiceInputBtn");
    voiceBtn.classList.add("recording");
    voiceBtn.innerHTML = "‚óè";
    
    recognition.start();
    
    recognition.onresult = function(event) {
        const transcript = event.results[0][0].transcript;
        document.getElementById("userAnswer").value = transcript;
        voiceBtn.classList.remove("recording");
        voiceBtn.innerHTML = "üé§";
    };
    
    recognition.onerror = function(event) {
        console.error("Erreur de reconnaissance vocale:", event.error);
        voiceBtn.classList.remove("recording");
        voiceBtn.innerHTML = "üé§";
    };
    
    recognition.onend = function() {
        voiceBtn.classList.remove("recording");
        voiceBtn.innerHTML = "üé§";
    };
}

// Afficher la pratique orale
function showOralPractice() {
    if (!checkOnlineStatus()) {
        return;
    }
    
    document.getElementById("lessonSection").style.display = "none";
    document.getElementById("exerciseSection").style.display = "none";
    document.getElementById("contactForm").style.display = "none";
    document.getElementById("oralPracticeSection").style.display = "block";
    
    // R√©initialiser la conversation
    document.getElementById("conversationContainer").innerHTML = `
        <div class="message-bubble bot-message">
            <div class="message-sender">Bot</div>
            Bonjour ! Je suis votre assistant pour la pratique orale. Parlez-moi en fran√ßais et je vous r√©pondrai. Commen√ßons !
        </div>
    `;
    
    document.getElementById("oralUserInput").value = "";
}

// G√©n√©rer une r√©ponse AI
function generateAIResponse(userMessage) {
    const lowerMessage = userMessage.toLowerCase();
    
    // R√©ponses directes
    for (const [key, responses] of Object.entries(aiResponses.responses)) {
        if (lowerMessage.includes(key)) {
            return responses[Math.floor(Math.random() * responses.length)];
        }
    }
    
    // R√©ponse aux salutations
    if (lowerMessage.includes('bonjour') || lowerMessage.includes('salut') || lowerMessage.includes('hello')) {
        return aiResponses.greetings[Math.floor(Math.random() * aiResponses.greetings.length)];
    }
    
    // R√©ponse g√©n√©rique avec question de suivi
    const followUp = aiResponses.followUps[Math.floor(Math.random() * aiResponses.followUps.length)];
    const question = aiResponses.questions[Math.floor(Math.random() * aiResponses.questions.length)];
    
    return `${followUp} ${question}`;
}

// Envoyer un message dans la pratique orale
function sendOralMessage() {
    const userInput = document.getElementById("oralUserInput").value.trim();
    
    if (!userInput) {
        return;
    }
    
    // Ajouter le message de l'utilisateur
    const conversationContainer = document.getElementById("conversationContainer");
    const userMessageElement = document.createElement("div");
    userMessageElement.className = "message-bubble user-message";
    userMessageElement.innerHTML = `
        <div class="message-sender">Vous</div>
        ${userInput}
    `;
    conversationContainer.appendChild(userMessageElement);
    
    // G√©n√©rer et ajouter la r√©ponse du bot
    setTimeout(() => {
        const botResponse = generateAIResponse(userInput);
        const botMessageElement = document.createElement("div");
        botMessageElement.className = "message-bubble bot-message";
        botMessageElement.innerHTML = `
            <div class="message-sender">Bot</div>
            ${botResponse}
        `;
        conversationContainer.appendChild(botMessageElement);
        
        // Faire parler le bot
        speakText(botResponse);
        
        // Faire d√©filer vers le bas
        conversationContainer.scrollTop = conversationContainer.scrollHeight;
    }, 1000);
    
    // Vider le champ de saisie
    document.getElementById("oralUserInput").value = "";
    
    // Faire d√©filer vers le bas
    conversationContainer.scrollTop = conversationContainer.scrollHeight;
}

// D√©marrer la reconnaissance vocale pour la pratique orale
function startOralVoiceRecognition() {
    if (!oralRecognition) {
        alert("La reconnaissance vocale n'est pas support√©e par votre navigateur.");
        return;
    }
    
    const voiceBtn = document.getElementById("oralVoiceBtn");
    voiceBtn.classList.add("recording");
    voiceBtn.innerHTML = "‚óè";
    
    oralRecognition.start();
    
    oralRecognition.onresult = function(event) {
        const transcript = event.results[0][0].transcript;
        document.getElementById("oralUserInput").value = transcript;
        voiceBtn.classList.remove("recording");
        voiceBtn.innerHTML = "üé§";
        
        // Envoyer automatiquement le message
        sendOralMessage();
    };
    
    oralRecognition.onerror = function(event) {
        console.error("Erreur de reconnaissance vocale:", event.error);
        voiceBtn.classList.remove("recording");
        voiceBtn.innerHTML = "üé§";
    };
    
    oralRecognition.onend = function() {
        voiceBtn.classList.remove("recording");
        voiceBtn.innerHTML = "üé§";
    };
}

// Faire parler le bot
function speakText(text) {
    if (speechSynthesis.speaking) {
        speechSynthesis.cancel();
    }
    
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = 'fr-FR';
    utterance.rate = 0.9;
    utterance.pitch = 1;
    
    speechSynthesis.speak(utterance);
}

// Afficher le formulaire de contact
function showContactForm() {
    document.getElementById("lessonSection").style.display = "none";
    document.getElementById("exerciseSection").style.display = "none";
    document.getElementById("oralPracticeSection").style.display = "none";
    document.getElementById("contactForm").style.display = "block";
}

// Cacher le formulaire de contact
function hideContactForm() {
    document.getElementById("contactForm").style.display = "none";
    document.getElementById("lessonSection").style.display = "block";
}

// Envoyer le formulaire de contact
function sendContactForm() {
    const email = document.getElementById("email").value;
    const subject = document.getElementById("subject").value;
    const messageText = document.getElementById("messageText").value;
    
    if (!email || !subject || !messageText) {
        alert("Veuillez remplir tous les champs du formulaire.");
        return;
    }
    
    // Simuler l'envoi d'email
    const mailtoLink = `mailto:urminmanantena@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(`De: ${email}\n\n${messageText}`)}`;
    window.location.href = mailtoLink;
    
    document.getElementById("message").textContent = "Formulaire envoy√© ! Redirection vers l'email...";
    document.getElementById("message").className = "message success";
    
    // R√©initialiser le formulaire
    document.getElementById("email").value = "";
    document.getElementById("subject").value = "";
    document.getElementById("messageText").value = "";
    
    // Retour √† la le√ßon apr√®s 3 secondes
    setTimeout(() => {
        hideContactForm();
    }, 3000);
}

// R√©initialiser tout le parcours
function resetAll() {
    if(confirm("Voulez-vous vraiment r√©initialiser tout le parcours ? Votre progression et votre score seront perdus.")) {
        currentLessonIndex = 0;
        currentExerciseIndex = 0;
        score = 0;
        localStorage.setItem("currentLessonIndex", currentLessonIndex);
        localStorage.setItem("currentExerciseIndex", currentExerciseIndex);
        localStorage.setItem("score", score);
        showLesson();
    }
}

// Initialiser les √©v√©nements
function initializeEvents() {
    // Pratique orale - Entr√©e clavier
    document.getElementById('oralUserInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            sendOralMessage();
        }
    });
    
    // Pratique orale - Bouton d'envoi
    document.getElementById('oralSendBtn').addEventListener('click', sendOralMessage);
    
    // Pratique orale - Reconnaissance vocale
    document.getElementById('oralVoiceBtn').addEventListener('click', startOralVoiceRecognition);
}

// V√©rifier le statut de connexion au chargement
window.addEventListener('load', function() {
    checkOnlineStatus();
    initializeSpeechRecognition();
    initializeEvents();
});

window.addEventListener('online', checkOnlineStatus);
window.addEventListener('offline', checkOnlineStatus);

// D√©marrage
showLesson();
</script>

</body>
</html>
